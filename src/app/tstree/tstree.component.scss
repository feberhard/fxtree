$node-height: 24px;
$border-bottom-width: 1px;

$expander-width: $node-height;

$indicator-width: 6px;
$indicator-height: 10px;

// TODO: remove div selector (currently scroll detection doesn't work without it);

tstree,
div {
    display: block;
    height: 100%;
    width: 100%;
    overflow: auto;
}

.tstree-container {
    overflow: auto;
}

.tstree-root {
    padding: 0;
    margin: 0;
}

.tstree-children {
    padding-left: 20px;
}

.tstree-node {
    list-style: none;
    box-sizing: border-box;
}

.tstree-node-content-wrapper {
    border-bottom: $border-bottom-width solid lightgray;
    display: flex;
    position: relative;
    overflow: visible;
}

.tstree-node-content {
    // margin: -1px, padding:1px to make border space part of node-content
    // to avoid blinking of drop indicator when switching between nodes
    margin-bottom: -$border-bottom-width;
    padding-bottom: $border-bottom-width;
    height: $node-height;
    line-height: $node-height;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.tstree-children-expander-wrapper {
    display: inline-block;
    height: $node-height;
    width: $expander-width;
    text-align: center;
    line-height: $node-height - 1px;
    margin-right: 7px;
}

// Expander
.tstree-children-expander {
    align-self: center;
    width: 0;
    height: 0;
    border-style: solid;
    display: inline-block;
    border-width: 0;
}

.tstree-node-expanded>.tstree-node-content-wrapper {
    .tstree-children-expander-wrapper {
        cursor: pointer;
        .tstree-children-expander {
            border-width: 0 0 8px 8px;
            border-color: transparent transparent #000000 transparent;
        }
    }
}

.tstree-node-collapsed>.tstree-node-content-wrapper {
    .tstree-children-expander-wrapper {
        cursor: pointer;
        .tstree-children-expander {
            border-width: 4px 0 4px 8px;
            border-color: transparent transparent transparent #000000;
        }
    }
}

// Drag and Drop Indicator
@mixin tstree-indicator {
    content: "";
    position: absolute;
    width: 0;
    height: 0;
    display: block;
    border-style: solid;
    border-width: $indicator-height/2 0 $indicator-height/2 $indicator-width;
    border-color: transparent transparent transparent black;
}

.tstree-before-indicator::before {
    @include tstree-indicator();
    margin-top: -($indicator-height / 2) - $border-bottom-width; // 5px - border-width to avoid jumping of the indicator when switching nodes
    margin-left: $expander-width - $indicator-width - 6px; // expander width - indicator width - offset
}

.tstree-inside-indicator::before {
    @include tstree-indicator();
    margin-top: ($node-height / 2) - ($indicator-height / 2);
    margin-left: $expander-width - $indicator-width - 1px; // expander width - indicator width - offset
}

.tstree-after-indicator::before {
    @include tstree-indicator();
    margin-top: $node-height - ($indicator-height / 2);
    margin-left: $expander-width - $indicator-width - 6px; // expander width - indicator width - offset
}
